---
title: "creation_db_arbre_monde´"
author: "Olivier Leroy"
date: "10/24/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Contexte

Sur mon laptop les arbres d'OSM monde sont un peu trop volumineux pour executer certaines operations (pr exemple changer de projection). Pour repondre à ce problème je vais passer par une BD PostgreSQL/Postgis et faire une part de ces operations dedans. 


Postgres 13 et postgis 3 ont été installé. Je n'ai pas touché à l'administration de Postgres vu que je suis en local mais c'est à faire au besoin. 


## Création de la base

```bash
sudo su - postgres
```

Une fois loggué on va créer un nouveau user 

```bash
createuser --interactive -P oli
```

Je lui ai ainsi donné des droits de création et un pwd (c'est tout).

En user postgres: 

```sql
create database arbremonde;
create schema if not exists postgis;
alter database arbremonde set search_path=public, postgis, contrib;
grant all privileges on database arbremonde to oli;
```

On se connecte sur la db (`\connect arbremonde`)

```sql
create table adresse_temp (id bigint primary key,
 lat float, lon float);
``` 


\copy adresse_temp  from 'arbre_monde.csv' delimiter ',' ;